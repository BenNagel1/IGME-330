(()=>{"use strict";var e,t,r,n,o,c,a,l,i,s,u,h,d,g,f,m,v=Object.freeze({gain:.5,numSamples:256}),y=(new Uint8Array(v.numSamples/2),function(e){t.src=e}),w=function(e,t,r,n){return void 0===n&&(n=1),"rgba(".concat(e,",").concat(t,",").concat(r,",").concat(n,")")},b=function(){function e(e,t,r,n,o,c,a){this.x=e,this.y=t,this.width=r,this.height=n,this.fill=o,this.stroke=c,this.wave=a}return e.prototype.update=function(e,t){this.x=e,this.y=t},e.prototype.draw=function(e){e.save(),e.beginPath(),e.fillStyle=this.fill,e.strokeStyle=this.stroke,e.lineWidth=5,e.ellipse(this.x,this.y,this.width,this.height,Math.PI/2,0,2*Math.PI),e.fill(),e.stroke(),e.closePath(),e.restore()},e}(),S=[],p={showGradient:!0,showBars:!0,showCircles:!0,showNoise:!1,showInvert:!1,showEmboss:!1,toggleLowshelf:!1,toggleHighshelf:!1,toggleWaveform:!1},q=function(){var w,p;!function(e,t){var r=new XMLHttpRequest;r.open("GET","./data/av-data.json",!0),r.onload=function(){if(200===r.status)try{var e=JSON.parse(r.responseText);t(e.title),function(e){var t=e,r=Object.values(t).map((function(e){return e.trackName})),n=document.querySelector("#data-list");n&&(n.innerHTML="<ul>".concat(r.map((function(e){return"<li>".concat(e,"</li>")})).join(""),"</ul>"))}(e.tracks),o=e.filters.bass,f=o,n=e.filters.treble,m=n}catch(e){console.error("Error parsing JSON:",e)}else console.error("Failed to load data");var n,o},r.onerror=function(){return console.error("XHR request error")},r.send()}(0,(function(e){g=e,document.title=g,document.querySelector("#title").innerHTML=g})),w=k.sound1,p=window.AudioContext,e=new p,t=new Audio,y(w),r=e.createMediaElementSource(t),n=e.createAnalyser(),(c=e.createBiquadFilter()).type="lowshelf",(a=e.createBiquadFilter()).type="highshelf",n.fftSize=v.numSamples,(o=e.createGain()).gain.value=v.gain,r.connect(c),c.connect(a),a.connect(n),n.connect(o),o.connect(e.destination);var q=document.querySelector("canvas");T(q),function(e,t){l=e.getContext("2d"),i=e.width,s=e.height,u=function(e,t,r,n,o){for(var c=e.createLinearGradient(0,0,0,o),a=0,l=[{percent:0,color:"#1F214D"},{percent:.5,color:"#BF3475"},{percent:1,color:"#EE6C45"}];a<l.length;a++){var i=l[a];c.addColorStop(i.percent,i.color)}return c}(l,0,0,0,s),h=t,d=new Uint8Array(h.fftSize/2),S[0]=new b(100,100,25,50,"red","darkred",20),S[1]=new b(100,100,25,50,"lime","green",70)}(q,n),A()},k=Object.freeze({sound1:"./media/New Adventure Theme.mp3"}),T=function(r){document.querySelector("#btn-fullscreen").onclick=function(e){var t;(t=r).requestFullscreen?t.requestFullscreen():t.mozRequestFullscreen?t.mozRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()};var n=document.querySelector("#btn-play");n&&(n.onclick=function(r){var n=r.currentTarget;"suspended"===e.state&&e.resume(),"no"===n.dataset.playing?(t.play(),n.dataset.playing="yes"):(t.pause(),n.dataset.playing="no")});var c=document.querySelector("#slider-volume"),a=document.querySelector("#label-volume");c.oninput=function(e){var t,r=e.target;t=r.value,t=Number(t),o.gain.value=t,a.innerHTML=Math.round(Number(r.value)/2*100).toString()},c.dispatchEvent(new Event("input")),document.querySelector("#select-track").onchange=function(e){var t=e.target;y(t.value),"yes"==n.dataset.playing&&n.dispatchEvent(new MouseEvent("click"))},document.querySelector("#cb-gradient").checked=p.showGradient,document.querySelector("#cb-bars").checked=p.showBars,document.querySelector("#cb-circles").checked=p.showCircles,document.querySelector("#cb-noise").checked=p.showNoise,document.querySelector("#cb-invert").checked=p.showInvert,document.querySelector("#cb-emboss").checked=p.showEmboss,document.querySelector("#cb-lowshelf").checked=p.toggleLowshelf,document.querySelector("#cb-highshelf").checked=p.toggleHighshelf,document.querySelector("#cb-waveform").checked=p.toggleWaveform,document.querySelector("#cb-gradient").addEventListener("change",(function(e){p.showGradient=e.target.checked})),document.querySelector("#cb-bars").addEventListener("change",(function(e){p.showBars=e.target.checked})),document.querySelector("#cb-circles").addEventListener("change",(function(e){p.showCircles=e.target.checked})),document.querySelector("#cb-noise").addEventListener("change",(function(e){p.showNoise=e.target.checked})),document.querySelector("#cb-invert").addEventListener("change",(function(e){p.showInvert=e.target.checked})),document.querySelector("#cb-emboss").addEventListener("change",(function(e){p.showEmboss=e.target.checked})),document.querySelector("#cb-lowshelf").addEventListener("change",(function(e){p.toggleLowshelf=e.target.checked,E()})),document.querySelector("#cb-highshelf").addEventListener("change",(function(e){p.toggleHighshelf=e.target.checked,L()})),document.querySelector("#cb-waveform").addEventListener("change",(function(e){p.toggleWaveform=e.target.checked}))},E=function(){p.toggleLowshelf?(c.frequency.setValueAtTime(1e3,e.currentTime),c.gain.setValueAtTime(f,e.currentTime)):c.gain.setValueAtTime(0,e.currentTime)},L=function(){p.toggleHighshelf?(a.frequency.setValueAtTime(1e3,e.currentTime),a.gain.setValueAtTime(m,e.currentTime)):a.gain.setValueAtTime(0,e.currentTime)},A=function(){setTimeout(A,1e3/60),function(e){if(p.toggleWaveform?h.getByteTimeDomainData(d):h.getByteFrequencyData(d),l.save(),l.fillStyle="black",l.globalAlpha=.1,l.fillRect(0,0,i,s),l.restore(),e.showGradient&&(l.save(),l.fillStyle=u,l.globalAlpha=.3,l.fillRect(0,0,i,s),l.restore()),e.showCircles){var t=s/4;l.save(),l.globalAlpha=.5;for(var r=0;r<d.length;r++){var n=d[r]/255,o=n*t;l.beginPath(),l.fillStyle=w(200,200,0,.34-n/3),l.arc(i/2,s/3,o,0,2*Math.PI,!1),l.fill(),l.closePath(),l.beginPath(),l.fillStyle=w(200,150,0,.1-n/10),l.arc(i/2,s/3,1.5*o,0,2*Math.PI,!1),l.fill(),l.closePath(),l.beginPath(),l.fillStyle=w(200,250,0,.5-n/5),l.arc(i/2,s/3,.5*o,0,2*Math.PI,!1),l.fill(),l.closePath()}l.restore()}if(e.showBars){var c=(i-4*d.length-10)/d.length*2;for(l.save(),l.strokeStyle="rgba(22, 105, 138, 0.5)",l.lineWidth=4,r=0;r<d.length;r++){l.fillStyle="rgba(80, ".concat(200-2*r,", 255, .8)"),l.fillRect(r*(c+4),406-d[r],c,350),l.strokeRect(r*(c+4),406-d[r],c,350);for(var a=0,g=S;a<g.length;a++)r==(v=g[a]).wave&&v.update(r*(c+4),406-d[r])}l.restore();for(var f=0,m=S;f<m.length;f++){var v;(v=m[f]).y<400&&v.draw(l)}for(var y=0,b=0,q=d;b<q.length;b++)y+=q[b];y/=d.length,l.save(),l.fillStyle="#e1bf92",l.strokeStyle="#b08d5f",l.lineWidth=5,l.globalAlpha=y>50?1:y/50,l.beginPath(),l.moveTo(-50,375),l.bezierCurveTo(-50,367,100,343,190,342),l.bezierCurveTo(250,341,400,374,500,374),l.bezierCurveTo(730,351,750,340,850,375),l.lineTo(850,475),l.lineTo(-50,475),l.closePath(),l.fill(),l.stroke(),l.restore()}var k=l.getImageData(0,0,i,s),T=k.data,E=T.length,L=k.width;for(r=0;r<E;r+=4)if(e.showNoise&&Math.random()<.05&&(T[r]=T[r+1]=T[r+2]=0,T[r]=255,T[r+1]=255,T[r+2]=255),e.showInvert){var A=T[r],P=T[r+1],F=T[r+2];T[r]=255-A,T[r+1]=255-P,T[r+2]=255-F}if(e.showEmboss)for(r=0;r<E;r++)r%4!=3&&(T[r]=127+2*T[r]-T[r+4]-T[r+4*L]);l.putImageData(k,0,0)}(p)};window.onload=function(){q()}})();
//# sourceMappingURL=bundle.js.map